import{au as O,U as b,T as x,e as G,O as N,N as A,B as v,at as V,p as k,o as w,w as y,b as M,j as d,S as P,Q as U}from"./R_UQo4UH.js";import{u as $,f as j,E as D,b as K}from"./BPaWrpOD.js";function J(o,n){return O(o)?!1:Array.isArray(o)?o.some(c=>b(c,n)):b(o,n)}const[L,Q]=x("RovingFocusGroup");var Y=G({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(o,{expose:n,emit:c}){const s=o,m=c,{loop:I,orientation:g,dir:T}=N(s),F=$(T),f=A(s,"currentTabStopId",m,{defaultValue:s.defaultCurrentTabStopId,passive:s.currentTabStopId===void 0}),u=v(!1),i=v(!1),p=v(0),{getItems:S,CollectionSlot:C}=V({isProvider:!0});function h(e){const a=!i.value;if(e.currentTarget&&e.target===e.currentTarget&&a&&!u.value){const r=new CustomEvent(D,K);if(e.currentTarget.dispatchEvent(r),m("entryFocus",r),!r.defaultPrevented){const l=S().map(t=>t.ref).filter(t=>t.dataset.disabled!==""),q=l.find(t=>t.getAttribute("data-active")===""),R=l.find(t=>t.getAttribute("data-highlighted")===""),_=l.find(t=>t.id===f.value),B=[q,R,_,...l].filter(Boolean);j(B,s.preventScrollOnEntryFocus)}}i.value=!1}function E(){setTimeout(()=>{i.value=!1},1)}return n({getItems:S}),Q({loop:I,dir:F,orientation:g,currentTabStopId:f,onItemFocus:e=>{f.value=e},onItemShiftTab:()=>{u.value=!0},onFocusableItemAdd:()=>{p.value++},onFocusableItemRemove:()=>{p.value--}}),(e,a)=>(w(),k(d(C),null,{default:y(()=>[M(d(P),{tabindex:u.value||p.value===0?-1:0,"data-orientation":d(g),as:e.as,"as-child":e.asChild,dir:d(F),style:{outline:"none"},onMousedown:a[0]||(a[0]=r=>i.value=!0),onMouseup:E,onFocus:h,onBlur:a[1]||(a[1]=r=>u.value=!1)},{default:y(()=>[U(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),W=Y;export{W as R,J as a,L as i};
