import{B as A,an as le,h as R,ao as oe,e as ne,ap as re,f as ie,J as de,ah as ce,p as I,w as n,aj as ue,o as g,a as t,b as a,l as me,d as k,aq as pe,c as $,j as s,k as fe,t as m,F as ye,r as _e,K as ge,n as E,af as H}from"./R_UQo4UH.js";import{_ as be}from"./Bs3XQjzI.js";import{u as he,_ as ve,a as xe}from"./BvNIPwWL.js";import{_ as ke}from"./CTrlIwtz.js";import{_ as we}from"./EXV_PVsQ.js";import{_ as Ae}from"./D5x8Ri5I.js";import{u as Ue,a as Ve,_ as Se}from"./BJYbV2M4.js";import{_ as $e}from"./qhBZFbG0.js";import{_ as De}from"./BnEkD7Af.js";import{_ as ze}from"./CSH7X6ox.js";import{_ as Ke}from"./QauSHDih.js";import"./Bh95yP3o.js";import"./BPaWrpOD.js";import"./fN_vNU5p.js";import"./C6Y-ieo6.js";import"./cBoBahqd.js";import"./BG30B-Es.js";const Ce=()=>({fetchAddresses:async()=>await $fetch("/api/user/addresses"),createAddress:async _=>await $fetch("/api/user/addresses",{method:"POST",body:_}),updateAddress:async(_,V)=>await $fetch(`/api/user/addresses/${_}`,{method:"PUT",body:V}),deleteAddress:async _=>await $fetch(`/api/user/addresses/${_}`,{method:"DELETE"}),setDefaultAddress:async _=>await $fetch(`/api/user/addresses/${_}/default`,{method:"PUT"})}),Ie=/^[^-]+.*-.*[^-]+$/,Ee=/^[^_]+.*_.*[^_]+$/,Ne=["arrowleft","arrowright","arrowup","arrowright","tab","escape","enter","backspace"];function je(N,U={}){const h=A([]),D=()=>{h.value.splice(0,h.value.length)},C=le(D,U.chainDelay??800),{macOS:_}=he(),V=Ve(),j=o=>{if(!o.key)return;const p=/^[a-z]{1}$/i.test(o.key),u=Ne.includes(o.key.toLowerCase());let f;if(h.value.push(o.key),h.value.length>=2){f=h.value.slice(-2).join("-");for(const c of K.value.filter(i=>i.chained))if(c.key===f){c.enabled&&(o.preventDefault(),c.handler(o)),D();return}}for(const c of K.value.filter(i=>!i.chained))if(o.key.toLowerCase()===c.key&&o.metaKey===c.metaKey&&o.ctrlKey===c.ctrlKey&&!((p||u)&&o.shiftKey!==c.shiftKey)){c.enabled&&(o.preventDefault(),c.handler(o)),D();return}C()},b=R(()=>{const o=V.value?.tagName,p=V.value?.contentEditable;return o==="INPUT"||o==="TEXTAREA"||p==="true"||p==="plaintext-only"?V.value?.name||!0:!1}),K=R(()=>Object.entries(oe(N)).map(([o,p])=>{if(!p)return null;let u;o.includes("-")&&o!=="-"&&!o.includes("_")&&!o.match(Ie)?.length&&console.trace(`[Shortcut] Invalid key: "${o}"`),o.includes("_")&&o!=="_"&&!o.match(Ee)?.length&&console.trace(`[Shortcut] Invalid key: "${o}"`);const f=o.includes("-")&&o!=="-"&&!o.includes("_");if(f)u={key:o.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const i=o.toLowerCase().split("_").map(y=>y);u={key:i.filter(y=>!["meta","command","ctrl","shift","alt","option"].includes(y)).join("_"),metaKey:i.includes("meta")||i.includes("command"),ctrlKey:i.includes("ctrl"),shiftKey:i.includes("shift"),altKey:i.includes("alt")||i.includes("option")}}if(u.chained=f,!_.value&&u.metaKey&&!u.ctrlKey&&(u.metaKey=!1,u.ctrlKey=!0),typeof p=="function"?u.handler=p:typeof p=="object"&&(u={...u,handler:p.handler}),!u.handler)return console.trace("[Shortcut] Invalid value"),null;let c=!0;return p.usingInput?typeof p.usingInput=="string"&&(c=b.value===p.usingInput):c=!b.value,u.enabled=c,u}).filter(Boolean));return Ue("keydown",j)}const Te={class:"my-5"},Fe={class:"flex items-center justify-between mb-6"},qe={key:0,class:"flex justify-center py-12"},Be={key:1,class:"text-center py-12"},Le={class:"text-red-500"},Oe={key:2,class:"text-center py-12"},Pe={key:3,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Me={class:"space-y-3"},Re={class:"flex items-start justify-between"},He={class:"flex items-center gap-2"},Je={class:"font-semibold text-lg"},We={class:"text-sm text-gray-500"},Xe={class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},Ye={key:0,class:"flex items-center gap-1"},Ze={class:"flex justify-center py-12"},Ge={class:"flex items-center gap-3"},Qe={class:"p-2 bg-primary-50 dark:bg-primary-900/20 rounded-lg"},et={class:"text-xl font-bold text-gray-900 dark:text-white"},tt={class:"text-sm text-gray-500 dark:text-gray-400"},st={class:"space-y-4 pb-4 border-b border-gray-200 dark:border-gray-700"},at={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},lt={class:"space-y-4"},ot={class:"flex items-center gap-2 mb-2"},nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},rt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},it={class:"space-y-4 pt-4 border-t border-gray-200 dark:border-gray-700"},dt={class:"flex items-center gap-2 mb-2"},ct={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},ut={class:"flex items-center gap-2"},mt={class:"flex flex-col-reverse sm:flex-row justify-end gap-3"},pt={class:"flex items-center gap-3"},ft={class:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg"},yt={class:"space-y-4"},_t={key:0,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},gt={class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},bt={class:"font-medium"},ht={class:"flex flex-col-reverse sm:flex-row justify-end gap-3"},Tt=ne({__name:"index",async setup(N){let U,h;re();const{fetchAddresses:D,createAddress:C,updateAddress:_,deleteAddress:V,setDefaultAddress:j}=Ce(),b=ie(),{data:K,pending:o,error:p,refresh:u}=([U,h]=de(()=>ue("addresses",()=>D(),{lazy:!0,server:!1})),U=await U,h(),U),f=A(!1),c=A(!1),i=A(!1),y=A(null),v=A(null),T=A([{label:"Home",value:"home"},{label:"Work",value:"work"},{label:"Billing",value:"billing"},{label:"Shipping",value:"shipping"},{label:"Other",value:"other"}]),F=A([{label:"Bangladesh",value:"BD"},{label:"United States",value:"US"}]),r=ce({type:T.value[0],label:"",first_name:"",last_name:"",address_line_1:"",city:"",state:"",postal_code:"",country:F.value[0],phone:"",is_default:!1});je({o:()=>f.value=!f.value});const J=d=>[[{label:"Set as Default",icon:"i-heroicons-star",onSelect:()=>Y(d),disabled:d.is_default}],[{label:"Edit",icon:"i-heroicons-pencil-square",onSelect(){W(d)}}],[{label:"Delete",icon:"i-heroicons-trash",color:"red",onSelect:()=>X(d),disabled:d.is_default}]],W=d=>{y.value=d,Object.assign(r,{type:T.value[0],label:d.label||"",street:d.street,city:d.city,state:d.state,zip:d.zip,country:F.value[0],phone:d.phone||"",is_default:d.is_default}),f.value=!0},X=d=>{v.value=d,c.value=!0},Y=async d=>{i.value=!0;try{await j(d.id),await u(),b.add({title:"Success",description:"Default address updated",color:"success"})}catch(e){b.add({title:"Error",description:e.message||"Failed to update default address",color:"error"})}finally{i.value=!1}},B=async()=>{i.value=!0;try{y.value?(await _(y.value.id,r),b.add({title:"Success",description:"Address updated successfully",color:"success"})):(await C(r),b.add({title:"Success",description:"Address added successfully",color:"success"})),await u(),L()}catch(d){b.add({title:"Error",description:d.message||"Failed to save address",color:"error"})}finally{i.value=!1}},Z=async()=>{i.value=!0;try{await V(v.value.id),await u(),b.add({title:"Success",description:"Address deleted successfully",color:"success"}),c.value=!1}catch(d){b.add({title:"Error",description:d.message||"Failed to delete address",color:"error"})}finally{i.value=!1}},L=()=>{f.value=!1,y.value=null,Object.assign(r,{type:"Home",label:"",street:"",city:"",state:"",zip:"",country:"",phone:"",is_default:!1})};return(d,e)=>{const S=me,w=fe,O=be,G=ve,q=ke,Q=pe,P=we,x=Ae,z=Se,ee=$e,te=De,se=ze,M=xe,ae=Ke;return g(),I(ae,null,{default:n(()=>[t("div",Te,[t("div",Fe,[e[16]||(e[16]=t("h1",{class:"text-2xl font-bold"},"My Addresses",-1)),a(S,{icon:"i-heroicons-plus",onClick:e[0]||(e[0]=l=>f.value=!0)},{default:n(()=>[...e[15]||(e[15]=[k(" Add New Address ",-1)])]),_:1})]),a(Q,null,{fallback:n(()=>[t("div",Ze,[a(w,{name:"i-heroicons-arrow-path",class:"animate-spin text-4xl text-primary-500"})])]),default:n(()=>[s(o)?(g(),$("div",qe,[a(w,{name:"i-heroicons-arrow-path",class:"animate-spin text-4xl text-primary-500"})])):s(p)?(g(),$("div",Be,[t("p",Le,"Error: "+m(s(p).message),1)])):s(K)?.length?(g(),$("div",Pe,[(g(!0),$(ye,null,_e(s(K),l=>(g(),I(q,{key:l.id,class:ge({"ring-2 ring-primary-500":l.is_default})},{default:n(()=>[t("div",Me,[t("div",Re,[t("div",null,[t("div",He,[t("h3",Je,m(l.type),1),l.is_default?(g(),I(O,{key:0,color:"primary",variant:"subtle"},{default:n(()=>[...e[19]||(e[19]=[k(" Default ",-1)])]),_:1})):E("",!0)]),t("p",We,m(l.label),1)]),a(G,{items:J(l)},{default:n(()=>[a(S,{icon:"i-heroicons-ellipsis-vertical",variant:"ghost",color:"secondary"})]),_:1},8,["items"])]),t("div",Xe,[t("p",null,m(l.street),1),t("p",null,m(l.city)+", "+m(l.state)+" "+m(l.zip),1),t("p",null,m(l.country),1),l.phone?(g(),$("p",Ye,[a(w,{name:"i-heroicons-phone",class:"size-4"}),k(" "+m(l.phone),1)])):E("",!0)])])]),_:2},1032,["class"]))),128))])):(g(),$("div",Oe,[a(w,{name:"i-heroicons-map-pin",class:"text-6xl text-gray-300 mb-4"}),e[18]||(e[18]=t("p",{class:"text-gray-500 mb-4"},"No addresses added yet",-1)),a(S,{onClick:e[1]||(e[1]=l=>f.value=!0)},{default:n(()=>[...e[17]||(e[17]=[k("Add Your First Address",-1)])]),_:1})]))]),_:1})]),a(M,{open:s(f),"onUpdate:open":e[12]||(e[12]=l=>H(f)?f.value=l:null),dismissible:!s(i),title:"Add/Update Address",description:"Address add/update"},{content:n(()=>[a(q,null,{header:n(()=>[t("div",Ge,[t("div",Qe,[a(w,{name:s(y)?"i-heroicons-pencil-square":"i-heroicons-map-pin",class:"text-primary-600 dark:text-primary-400 text-xl"},null,8,["name"])]),t("div",null,[t("h2",et,m(s(y)?"Edit Address":"Add New Address"),1),t("p",tt,m(s(y)?"Update your address details":"Fill in your address information"),1)])])]),footer:n(()=>[t("div",mt,[a(S,{color:"secondary",variant:"outline",onClick:L,disabled:s(i),size:"lg",block:"",class:"sm:w-auto"},{default:n(()=>[...e[25]||(e[25]=[k(" Cancel ",-1)])]),_:1},8,["disabled"]),a(S,{type:"submit",onClick:B,loading:s(i),size:"lg",icon:"i-heroicons-check",block:"",class:"sm:w-auto"},{default:n(()=>[k(m(s(y)?"Update Address":"Add Address"),1)]),_:1},8,["loading"])])]),default:n(()=>[a(se,{state:s(r),onSubmit:B,class:"space-y-5"},{default:n(()=>[t("div",st,[a(x,{label:"Address Type",required:"",name:"type"},{default:n(()=>[a(P,{modelValue:s(r).type,"onUpdate:modelValue":e[2]||(e[2]=l=>s(r).type=l),items:s(T),placeholder:"Select address type",icon:"i-heroicons-tag",size:"lg",class:"w-full"},null,8,["modelValue","items"])]),_:1})]),t("div",at,[a(x,{label:"First Name",required:"",name:"first_name"},{default:n(()=>[a(z,{modelValue:s(r).first_name,"onUpdate:modelValue":e[3]||(e[3]=l=>s(r).first_name=l),placeholder:"First Name",icon:"i-heroicons-building-office-2",size:"lg"},null,8,["modelValue"])]),_:1}),a(x,{label:"Last Name",required:"",name:"last_name"},{default:n(()=>[a(z,{modelValue:s(r).last_name,"onUpdate:modelValue":e[4]||(e[4]=l=>s(r).last_name=l),placeholder:"Last Name",icon:"i-heroicons-map",size:"lg"},null,8,["modelValue"])]),_:1})]),t("div",lt,[t("div",ot,[a(w,{name:"i-heroicons-home",class:"text-gray-400"}),e[20]||(e[20]=t("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Location Details",-1))]),a(x,{label:"Street Address",required:"",name:"street"},{default:n(()=>[a(ee,{modelValue:s(r).address_line_1,"onUpdate:modelValue":e[5]||(e[5]=l=>s(r).address_line_1=l),placeholder:"Enter your street address, apartment, suite, etc.",class:"w-full",rows:2,size:"lg",autoresize:""},null,8,["modelValue"])]),_:1})]),t("div",nt,[a(x,{label:"City",required:"",name:"city"},{default:n(()=>[a(z,{modelValue:s(r).city,"onUpdate:modelValue":e[6]||(e[6]=l=>s(r).city=l),placeholder:"City",icon:"i-heroicons-building-office-2",size:"lg"},null,8,["modelValue"])]),_:1}),a(x,{label:"State / Province",required:"",name:"state"},{default:n(()=>[a(z,{modelValue:s(r).state,"onUpdate:modelValue":e[7]||(e[7]=l=>s(r).state=l),placeholder:"State or Province",icon:"i-heroicons-map",size:"lg"},null,8,["modelValue"])]),_:1})]),t("div",rt,[a(x,{label:"ZIP / Postal Code",required:"",name:"zip"},{default:n(()=>[a(z,{modelValue:s(r).postal_code,"onUpdate:modelValue":e[8]||(e[8]=l=>s(r).postal_code=l),placeholder:"e.g., 12345",icon:"i-heroicons-hashtag",size:"lg"},null,8,["modelValue"])]),_:1}),a(x,{label:"Country",required:"",name:"country"},{default:n(()=>[a(P,{modelValue:s(r).country,"onUpdate:modelValue":e[9]||(e[9]=l=>s(r).country=l),items:s(F),placeholder:"Country",icon:"i-heroicons-globe-alt",size:"lg",class:"w-full"},null,8,["modelValue","items"])]),_:1})]),t("div",it,[t("div",dt,[a(w,{name:"i-heroicons-phone",class:"text-gray-400"}),e[21]||(e[21]=t("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Contact Information",-1))]),a(x,{label:"Phone Number (Optional)",name:"phone",hint:"Include country code for international"},{default:n(()=>[a(z,{modelValue:s(r).phone,"onUpdate:modelValue":e[10]||(e[10]=l=>s(r).phone=l),placeholder:"+1 (234) 567-8900",icon:"i-heroicons-device-phone-mobile",size:"lg",type:"tel",class:"w-full"},null,8,["modelValue"])]),_:1})]),t("div",ct,[a(te,{modelValue:s(r).is_default,"onUpdate:modelValue":e[11]||(e[11]=l=>s(r).is_default=l),label:"Set as default address",ui:{label:"text-sm font-medium text-gray-700 dark:text-gray-300"}},{label:n(()=>[t("div",ut,[e[23]||(e[23]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Set as default address ",-1)),s(r).is_default?(g(),I(O,{key:0,color:"primary",variant:"subtle",size:"xs"},{default:n(()=>[...e[22]||(e[22]=[k(" Default ",-1)])]),_:1})):E("",!0)]),e[24]||(e[24]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," This address will be selected by default for orders ",-1))]),_:1},8,["modelValue"])])]),_:1},8,["state"])]),_:1})]),_:1},8,["open","dismissible"]),a(M,{open:s(c),"onUpdate:open":e[14]||(e[14]=l=>H(c)?c.value=l:null)},{content:n(()=>[a(q,null,{header:n(()=>[t("div",pt,[t("div",ft,[a(w,{name:"i-heroicons-exclamation-triangle",class:"text-red-600 dark:text-red-400 text-xl"})]),e[26]||(e[26]=t("div",null,[t("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Delete Address"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"This action cannot be undone")],-1))])]),footer:n(()=>[t("div",ht,[a(S,{color:"secondary",variant:"outline",onClick:e[13]||(e[13]=l=>c.value=!1),disabled:s(i),size:"lg",block:"",class:"sm:w-auto"},{default:n(()=>[...e[29]||(e[29]=[k(" Cancel ",-1)])]),_:1},8,["disabled"]),a(S,{color:"error",onClick:Z,loading:s(i),size:"lg",icon:"i-heroicons-trash",block:"",class:"sm:w-auto"},{default:n(()=>[...e[30]||(e[30]=[k(" Delete Address ",-1)])]),_:1},8,["loading"])])]),default:n(()=>[t("div",yt,[e[28]||(e[28]=t("div",{class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},[t("p",{class:"text-sm text-red-800 dark:text-red-200"}," Are you sure you want to delete this address? All associated data will be permanently removed from your account. ")],-1)),s(v)?(g(),$("div",_t,[e[27]||(e[27]=t("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Address Details:",-1)),t("div",gt,[t("p",bt,m(s(v).type)+" - "+m(s(v).label),1),t("p",null,m(s(v).street),1),t("p",null,m(s(v).city)+", "+m(s(v).state)+" "+m(s(v).zip),1)])])):E("",!0)])]),_:1})]),_:1},8,["open"])]),_:1})}}});export{Tt as default};
