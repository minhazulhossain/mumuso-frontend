import{ap as l,ai as f}from"./R_UQo4UH.js";const r=(t,o)=>{const s=t.data?.message||t.message||o;throw new Error(s)},y=()=>{const t=l(),o=async(e,a)=>{try{const c=await $fetch("/api/auth/login",{method:"POST",body:{email:e,password:a}});return await t.fetch(),c}catch(c){r(c,"Login failed")}},s=async e=>{try{const a=await $fetch("/api/auth/register",{method:"POST",body:e});return await t.fetch(),a}catch(a){r(a,"Registration failed")}},n=async()=>{try{await $fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("Logout error:",e)}finally{t.clear(),await f("/auth/login")}},i=async()=>{try{return await t.fetch(),t.loggedIn.value}catch{return!1}},h=async e=>{try{return await $fetch("/api/auth/forgot-password",{method:"POST",body:{email:e}})}catch(a){r(a,"Failed to send reset link")}},d=async e=>{try{return await $fetch("/api/auth/reset-password",{method:"POST",body:e})}catch(a){r(a,"Password reset failed")}},u=async e=>{try{const a=await $fetch("/api/auth/profile",{method:"PUT",body:e});return await t.fetch(),a}catch(a){r(a,"Profile update failed")}};return{user:t.user,loggedIn:t.loggedIn,login:o,register:s,logout:n,checkAuth:i,forgotPassword:h,resetPassword:d,updateProfile:u,fetch:t.fetch,clear:t.clear}};export{y as u};
