import{_ as ct}from"./S12lpPS7.js";import{_ as dt}from"./8Z20-I7K.js";import{_ as ut}from"./DlAUqK2U.js";import{c as n,o as a,a as e,b as i,F as E,r as R,e as Q,h as f,D as Y,n as u,K as W,j as t,p as v,t as l,w as m,d as p,k as Z,ak as _t,f as gt,ag as mt,B as b,$ as pt,az as xt,l as ht,q as yt,af as ft,i as vt}from"./R_UQo4UH.js";import{_ as H}from"./Bs3XQjzI.js";import{a as kt}from"./7YBqWmXK.js";import{_ as bt}from"./QauSHDih.js";import{u as $t}from"./F1YEKKmH.js";import{u as wt}from"./CmdlfJXN.js";const St={},Ft={class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},Ct={class:"space-y-4"},Vt={class:"grid grid-cols-4 gap-2"},Pt={class:"space-y-6"},zt={class:"flex items-center gap-2"},jt={class:"flex items-baseline gap-4"},Bt={class:"space-y-2"};function Ut(q,F){const d=dt;return a(),n("div",Ft,[e("div",Ct,[i(d,{class:"aspect-square w-full rounded-lg"}),e("div",Vt,[(a(),n(E,null,R(4,C=>i(d,{key:C,class:"aspect-square w-full rounded-lg"})),64))])]),e("div",Pt,[e("div",zt,[i(d,{class:"h-6 w-20 rounded-full"}),i(d,{class:"h-6 w-16 rounded-full"})]),e("div",null,[i(d,{class:"h-10 w-3/4 mb-2"}),i(d,{class:"h-6 w-32"})]),e("div",jt,[i(d,{class:"h-12 w-32"}),i(d,{class:"h-8 w-24"})]),i(d,{class:"h-6 w-48"}),e("div",Bt,[i(d,{class:"h-4 w-full"}),i(d,{class:"h-4 w-full"}),i(d,{class:"h-4 w-2/3"})]),i(d,{class:"h-32 w-full rounded-lg"}),i(d,{class:"h-12 w-32"}),i(d,{class:"h-14 w-full rounded-lg"})])])}const qt=Object.assign(ut(St,[["render",Ut]]),{__name:"SingleProductSkeleton"}),At={key:0,class:"space-y-4"},It={class:"grid grid-cols-1 gap-3"},Ot=["onClick","disabled"],Mt={class:"flex items-center gap-4 flex-1"},Tt={key:0,class:"w-16 h-16 rounded-md overflow-hidden flex-shrink-0"},Wt=["src","alt"],Et={class:"flex-1 min-w-0"},Rt={class:"flex items-center gap-2 mb-1"},Dt={class:"font-semibold text-gray-900 dark:text-white truncate"},Kt={class:"text-sm text-gray-500 dark:text-gray-400 mb-1"},Lt={class:"flex items-center gap-2"},Nt={class:"text-lg font-bold text-primary-500"},Qt={key:0,class:"text-sm text-gray-400 line-through"},Yt={class:"flex flex-col items-end gap-1"},Zt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Ht={key:0,class:"absolute top-3 right-3"},Xt={key:0,class:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},Gt={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-2"},Jt={class:"text-sm space-y-1"},te={class:"text-gray-900 dark:text-white"},ee={class:"font-semibold"},se={class:"text-gray-600 dark:text-gray-400"},oe={class:"text-gray-600 dark:text-gray-400"},ae={class:"font-semibold text-primary-500"},re=Q({__name:"ProductVariationSelector",props:{variations:{},modelValue:{}},emits:["update:modelValue","variation-selected"],setup(q,{emit:F}){const d=q,C=F,k=f(()=>d.modelValue),V=f(()=>d.variations.filter(_=>_.is_active).sort((_,g)=>_.sort_order-g.sort_order)),P=f(()=>k.value?d.variations.find(_=>_.id===k.value):null),M=_=>{!_.is_active||_.stock_status!=="in_stock"||(C("update:modelValue",_.id),C("variation-selected",_))};return Y(()=>{if(!k.value&&V.value.length>0){const _=V.value.find(g=>g.stock_status==="in_stock");_&&M(_)}}),(_,g)=>{const A=H,s=Z;return q.variations&&q.variations.length>0?(a(),n("div",At,[e("div",null,[g[2]||(g[2]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Select Variation ",-1)),e("div",It,[(a(!0),n(E,null,R(t(V),r=>(a(),n("button",{key:r.id,onClick:z=>M(r),disabled:!r.is_active||r.stock_status!=="in_stock",class:W(["relative flex items-center justify-between p-4 border-2 rounded-lg transition-all text-left",[t(k)===r.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",!r.is_active||r.stock_status!=="in_stock"?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[e("div",Mt,[r.images?.thumb?(a(),n("div",Tt,[e("img",{src:r.images.thumb,alt:r.name,class:"w-full h-full object-cover"},null,8,Wt)])):u("",!0),e("div",Et,[e("div",Rt,[e("h4",Dt,l(r.name),1),t(k)===r.id?(a(),v(A,{key:0,color:"primary",variant:"solid",size:"xs"},{default:m(()=>[...g[0]||(g[0]=[p(" Selected ",-1)])]),_:1})):u("",!0)]),e("p",Kt," SKU: "+l(r.sku),1),e("div",Lt,[e("span",Nt," $"+l(parseFloat(r.price).toFixed(2)),1),r.compare_price?(a(),n("span",Qt," $"+l(parseFloat(r.compare_price).toFixed(2)),1)):u("",!0)])]),e("div",Yt,[i(A,{color:r.stock_status==="in_stock"?"success":"error",variant:"soft",size:"sm"},{default:m(()=>[p(l(r.stock_status==="in_stock"?"In Stock":"Out of Stock"),1)]),_:2},1032,["color"]),r.stock_status==="in_stock"?(a(),n("span",Zt,l(r.stock_quantity)+" available ",1)):u("",!0),r.stock_quantity<10&&r.stock_status==="in_stock"?(a(),v(A,{key:1,color:"warning",variant:"soft",size:"xs"},{default:m(()=>[...g[1]||(g[1]=[p(" Low Stock ",-1)])]),_:1})):u("",!0)])]),t(k)===r.id?(a(),n("div",Ht,[i(s,{name:"i-heroicons-check-circle-solid",class:"text-2xl text-primary-500"})])):u("",!0)],10,Ot))),128))])]),t(P)?(a(),n("div",Xt,[e("div",Gt,[i(s,{name:"i-heroicons-information-circle"}),g[3]||(g[3]=e("span",{class:"font-medium"},"Selected Variation",-1))]),e("div",Jt,[e("p",te,[e("span",ee,l(t(P).name),1)]),e("p",se," SKU: "+l(t(P).sku),1),e("p",oe,[g[4]||(g[4]=p(" Price: ",-1)),e("span",ae,"$"+l(parseFloat(t(P).price).toFixed(2)),1)])])])):u("",!0)])):u("",!0)}}}),ie=Object.assign(re,{__name:"ProductVariationSelector"}),le={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},ne={key:1,class:"text-center py-16"},ce={class:"text-red-600 dark:text-red-400"},de={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},ue={class:"space-y-4"},_e={class:"aspect-square overflow-hidden rounded-lg bg-gray-100 relative group cursor-zoom-in"},ge=["src","alt"],me={key:0,class:"absolute inset-0 bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center pointer-events-none"},pe={class:"bg-white dark:bg-gray-800 rounded-full p-3 opacity-0 group-hover:opacity-100 transition-opacity"},xe={key:1,class:"absolute top-4 right-4"},he={key:2,class:"absolute top-4 left-4"},ye={key:0,class:"grid grid-cols-4 gap-2"},fe=["onClick"],ve=["src","alt"],ke={class:"space-y-4"},be={class:"flex items-center gap-2"},$e={class:"text-4xl font-bold text-gray-900 dark:text-white mb-2"},we={class:"text-lg text-gray-600 dark:text-gray-400"},Se={class:"space-y-2"},Fe={class:"flex items-baseline gap-4"},Ce={class:"text-4xl font-bold text-primary-500"},Ve={key:0,class:"text-2xl text-gray-400 line-through"},Pe={key:0,class:"flex items-center gap-2"},ze={class:"text-sm text-green-600 dark:text-green-400 font-medium"},je={class:"flex items-center gap-4"},Be={class:"flex items-center gap-2"},Ue={class:"text-gray-700 dark:text-gray-300"},qe={key:0},Ae={class:"text-lg text-gray-600 dark:text-gray-400 leading-relaxed"},Ie={key:1},Oe={class:"text-gray-600 dark:text-gray-400 leading-relaxed whitespace-pre-line"},Me={class:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4 space-y-2"},Te={key:0,class:"flex justify-between"},We={class:"font-medium text-gray-900 dark:text-white"},Ee={class:"flex justify-between"},Re={class:"font-medium text-gray-900 dark:text-white"},De={key:1,class:"flex justify-between"},Ke={class:"font-medium text-gray-900 dark:text-white"},Le={key:3,class:"flex items-center gap-4"},Ne={class:"flex items-center gap-2"},Qe={class:"w-12 text-center font-semibold text-gray-900 dark:text-white"},Ye={class:"text-sm text-gray-500"},Ze={class:"flex gap-4 pt-4"},He={key:0,class:"flex items-center gap-2"},Xe={class:"text-xs line-through opacity-75"},Ge={key:1},Je={class:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-3"},ts={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},es={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},ss={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},os={key:3,class:"text-center py-16"},as={key:4,class:"mt-16"},ps=Q({__name:"[slug]",setup(q){const F=_t(),d=gt(),{fetchProduct:C,loading:k,error:V}=$t(),{addToCart:P,toggleCart:M}=wt(),{isInWishlist:_,toggleWishlist:g,initWishlist:A}=mt(),s=b(null),r=b(1),z=b(""),$=b(!1),D=b({}),K=b([]),j=b(null),x=b(null),I=f(()=>x.value?x.value.price:s.value?.price||"0"),T=f(()=>x.value?x.value.compare_price:s.value?.compare_price),O=f(()=>x.value?x.value.stock_quantity:s.value?.stock_quantity||0),X=f(()=>x.value?x.value.stock_status:s.value?.stock_status||"out_of_stock"),B=f(()=>X.value==="in_stock"),G=f(()=>x.value?x.value.sku:s.value?.sku||""),J=f(()=>{const c=[{label:"Home",to:"/"},{label:"Shop",to:"/shop"}];return s.value&&(s.value.categories.length>0&&c.push({label:s.value.categories[0].name,to:`/shop?category=${s.value.categories[0].slug}`}),c.push({label:s.value.name,to:`/shop/product/${s.value.slug}`})),c}),L=async()=>{s.value=null;const c=F.params.slug,o=await C(c);o&&(s.value=o,K.value=o?.related_products,z.value=o.images.featured.medium||o.images.featured.original)},tt=()=>{$.value=!$.value,$.value||(D.value={})},et=c=>{if(!$.value)return;const U=c.currentTarget.getBoundingClientRect(),N=(c.clientX-U.left)/U.width*100,y=(c.clientY-U.top)/U.height*100;D.value={transformOrigin:`${N}% ${y}%`}},st=c=>{x.value=c,j.value=c.id,c.images?.medium&&(z.value=c.images.medium),r.value=1},ot=async()=>{if(!s.value)return;if(s.value.variations&&s.value.variations.length>0&&!j.value){d.add({title:"Please select a variation",description:"Choose a product variation before adding to cart",color:"warning",icon:"i-heroicons-exclamation-triangle"});return}await P(s.value.slug,r.value,j.value||void 0)&&(d.add({title:"Added to cart!",description:x.value?`${r.value}x ${x.value.name}`:`${r.value}x ${s.value.name}`,color:"success",icon:"i-heroicons-shopping-cart"}),r.value=1,setTimeout(()=>{M()},500))},at=()=>{if(!s.value)return;g(s.value)?d.add({title:"Added to wishlist!",description:`${s.value.name} saved for later`,color:"success",icon:"i-heroicons-heart-solid"}):d.add({title:"Removed from wishlist",description:`${s.value.name} removed from your wishlist`,color:"secondary",icon:"i-heroicons-heart"})},rt=c=>{const o=c.target;o.src="https://placehold.co/600x600"};return pt(()=>F.params.slug,()=>{F.params.slug&&L()}),Y(async()=>{try{A(),await L()}catch(c){console.error("Failed to load product:",c)}}),xt(()=>{s.value&&vt({title:s.value.name,description:s.value.short_description||s.value.description||`Buy ${s.value.name} - ${s.value.categories.map(c=>c.name).join(", ")}`,keywords:`${s.value.name}, ${s.value.categories.map(c=>c.name).join(", ")}, ${s.value.sku}`})}),(c,o)=>{const U=ct,N=qt,y=Z,w=ht,S=H,it=ie,lt=kt,nt=bt;return a(),n("div",le,[i(nt,{class:"py-8"},{default:m(()=>[i(U,{items:t(J),class:"mb-6"},null,8,["items"]),t(k)?(a(),v(N,{key:0})):t(V)?(a(),n("div",ne,[i(y,{name:"i-heroicons-exclamation-triangle",class:"text-4xl text-red-500 mb-4"}),e("p",ce,l(t(V)),1),i(w,{onClick:L,color:"primary",class:"mt-4"},{default:m(()=>[...o[4]||(o[4]=[p("Try Again",-1)])]),_:1})])):t(s)?(a(),n("div",de,[e("div",ue,[e("div",_e,[e("img",{src:t(z),alt:t(s).name,class:W(["w-full h-full object-cover transition-transform duration-300",{"scale-150":t($)}]),style:yt(t(D)),onError:rt,onClick:tt,onMousemove:et,onMouseleave:o[0]||(o[0]=h=>$.value=!1)},null,46,ge),t($)?u("",!0):(a(),n("div",me,[e("div",pe,[i(y,{name:"i-lucide-lightbulb",class:"text-2xl text-gray-700 dark:text-gray-300"})])])),t(s).has_discount?(a(),n("div",xe,[i(S,{color:"error",variant:"solid",size:"lg"},{default:m(()=>[p(" -"+l(t(s).discount_percentage)+"% OFF ",1)]),_:1})])):u("",!0),t(s).in_stock?u("",!0):(a(),n("div",he,[i(S,{color:"secondary",variant:"solid",size:"lg"},{default:m(()=>[...o[5]||(o[5]=[p(" Out of Stock ",-1)])]),_:1})]))]),t(s).images.all.length>1?(a(),n("div",ye,[(a(!0),n(E,null,R(t(s).images.all,h=>(a(),n("button",{key:h.id,onClick:rs=>z.value=h.url,class:W(["aspect-square overflow-hidden rounded-lg bg-gray-100 border-2 transition-colors",t(z)===h.url?"border-primary-500":"border-transparent hover:border-gray-300"])},[e("img",{src:h.thumb,alt:h.alt,class:"w-full h-full object-cover"},null,8,ve)],10,fe))),128))])):u("",!0)]),e("div",ke,[e("div",be,[(a(!0),n(E,null,R(t(s).categories,h=>(a(),v(S,{key:h.id,color:"primary",variant:"soft"},{default:m(()=>[p(l(h.name),1)]),_:2},1024))),128)),t(s).is_featured?(a(),v(S,{key:0,color:"warning",variant:"soft"},{default:m(()=>[...o[6]||(o[6]=[p(" Featured ",-1)])]),_:1})):u("",!0),i(S,{color:t(s).in_stock?"success":"error",variant:"soft"},{default:m(()=>[p(l(t(s).stock_status),1)]),_:1},8,["color"])]),e("div",null,[e("h1",$e,l(t(s).name),1),e("p",we,"SKU: "+l(t(G)),1)]),e("div",Se,[e("div",Fe,[e("span",Ce," $"+l(parseFloat(t(I)).toFixed(2)),1),t(T)?(a(),n("span",Ve," $"+l(parseFloat(t(T)).toFixed(2)),1)):u("",!0)]),t(s).has_discount&&t(s).discount_percentage?(a(),n("div",Pe,[i(S,{color:"success",variant:"soft",size:"lg"},{default:m(()=>[i(y,{name:"i-heroicons-tag",class:"mr-1"}),p(" Save "+l(t(s).discount_percentage)+"% ",1)]),_:1}),e("span",ze," You save $"+l((parseFloat(t(T)||"0")-parseFloat(t(I))).toFixed(2)),1)])):u("",!0)]),e("div",je,[e("div",Be,[i(y,{name:t(B)?"i-lucide-check-circle":"i-lucide-x-circle",class:W(t(B)?"text-green-500":"text-red-500")},null,8,["name","class"]),e("span",Ue,l(t(B)?`${t(O)} in stock`:"Out of stock"),1)]),t(O)<10&&t(B)?(a(),v(S,{key:0,color:"warning",variant:"soft"},{default:m(()=>[...o[7]||(o[7]=[p(" Low Stock ",-1)])]),_:1})):u("",!0)]),t(s).short_description?(a(),n("div",qe,[e("p",Ae,l(t(s).short_description),1)])):u("",!0),t(s).description?(a(),n("div",Ie,[o[8]||(o[8]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Description",-1)),e("div",Oe,l(t(s).description),1)])):u("",!0),t(s).variations&&t(s).variations.length>0?(a(),v(it,{key:2,modelValue:t(j),"onUpdate:modelValue":o[1]||(o[1]=h=>ft(j)?j.value=h:null),variations:t(s).variations,onVariationSelected:st},null,8,["modelValue","variations"])):u("",!0),e("div",Me,[t(s).weight?(a(),n("div",Te,[o[9]||(o[9]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Weight:",-1)),e("span",We,l(t(s).weight)+" kg",1)])):u("",!0),e("div",Ee,[o[10]||(o[10]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Status:",-1)),e("span",Re,l(t(s).status),1)]),t(s).variations&&t(s).variations.length>0?(a(),n("div",De,[o[11]||(o[11]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Variations:",-1)),e("span",Ke,l(t(s).variations.length)+" available",1)])):u("",!0)]),t(B)?(a(),n("div",Le,[o[12]||(o[12]=e("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Quantity:",-1)),e("div",Ne,[i(w,{onClick:o[2]||(o[2]=h=>r.value=Math.max(1,t(r)-1)),icon:"i-heroicons-minus",color:"secondary",size:"sm",disabled:t(r)<=1,ui:{base:"rounded-none"}},null,8,["disabled"]),e("span",Qe,l(t(r)),1),i(w,{onClick:o[3]||(o[3]=h=>r.value=Math.min(t(O),t(r)+1)),icon:"i-heroicons-plus",color:"secondary",size:"sm",disabled:t(r)>=t(O),ui:{base:"rounded-none"}},null,8,["disabled"])]),e("span",Ye," Max: "+l(t(O)),1)])):u("",!0),e("div",Ze,[t(B)?(a(),v(w,{key:0,onClick:ot,size:"xl",class:"flex-1",icon:"i-heroicons-shopping-cart",ui:{base:"rounded-none"}},{default:m(()=>[t(s).has_discount?(a(),n("span",He,[p(" Add to Cart - $"+l((parseFloat(t(I))*t(r)).toFixed(2))+" ",1),e("span",Xe,"$"+l((parseFloat(t(T)||t(I))*t(r)).toFixed(2)),1)])):(a(),n("span",Ge," Add to Cart - $"+l((parseFloat(t(I))*t(r)).toFixed(2)),1))]),_:1})):(a(),v(w,{key:1,size:"xl",class:"flex-1",disabled:""},{default:m(()=>[...o[13]||(o[13]=[p(" Out of Stock ",-1)])]),_:1})),i(w,{size:"xl",color:t(_)(t(s).slug)?"primary":"secondary",variant:t(_)(t(s).slug)?"solid":"soft",icon:t(_)(t(s).slug)?"i-heroicons-heart-solid":"i-heroicons-heart",onClick:at,ui:{base:"transition-all duration-200 rounded-none"}},{default:m(()=>[p(l(t(_)(t(s).slug)?"Saved":"Save"),1)]),_:1},8,["color","variant","icon"])]),e("div",Je,[e("div",ts,[i(y,{name:"i-heroicons-truck"}),o[14]||(o[14]=e("span",null,"Free shipping on orders over $50",-1))]),e("div",es,[i(y,{name:"i-heroicons-arrow-path"}),o[15]||(o[15]=e("span",null,"30-day return policy",-1))]),e("div",ss,[i(y,{name:"i-heroicons-shield-check"}),o[16]||(o[16]=e("span",null,"Secure checkout",-1))])])])])):(a(),n("div",os,[i(y,{name:"i-heroicons-shopping-bag",class:"text-6xl text-gray-300 mb-4"}),o[18]||(o[18]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},"Product not found",-1)),o[19]||(o[19]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"The product you're looking for doesn't exist",-1)),i(w,{to:"/shop",color:"primary"},{default:m(()=>[...o[17]||(o[17]=[p("Browse Products",-1)])]),_:1})])),t(s)&&t(K).length>0?(a(),n("div",as,[i(lt,{items:t(K),title:"Related Products"},null,8,["items"])])):u("",!0)]),_:1})])}}});export{ps as default};
